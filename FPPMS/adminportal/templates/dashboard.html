<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Project Proposals | Dashboard</title>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
<script src="https://kit.fontawesome.com/a81368914c.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" />
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
<link rel="stylesheet" href="/static/addAdmin/styles/reset.min.css" />
<link rel="stylesheet" href="/static/addAdmin/styles/style.css" />
<link rel="stylesheet" href="/static/addAdmin/styles/header-1.css" />
    <link rel="apple-touch-icon" sizes="180x180" href="/static/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/static/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/static/favicon-16x16.png">
<link rel="manifest" href="/static/site.webmanifest">
<style>
* {
  box-sizing: border-box;
}

body {
  font-family: Arial, Helvetica, sans-serif;
}

/* Float four columns side by side */
.column {
  float: left;
  width: 25%;
  padding: 0 10px;
}

/* Remove extra left and right margins, due to padding */
.row {margin: 0 -5px;}

/* Clear floats after the columns */
.row:after {
  content: "";
  display: table;
  clear: both;
}

/* Responsive columns */
@media screen and (max-width: 600px) {
  .column {
    width: 100%;
    display: block;
    margin-bottom: 20px;
  }
}

/* Style the counter cards */
.card {
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
  padding: 20px;
  text-align: center;
}
h4{
font-size:30px;
}
.count{
	font-size:25px
}
 .nav-link:hover {
      background-color: white;
      color: black;
  }


</style>
</head>
<body>

<header class="site-header">
        <div class="wrapper site-header__wrapper">
          <a href="#" class="brand">
              <img src="/static/addAdmin/logo.png" width="210" height="200" class="img-fluid">
            </a>
          <nav class="nav">
            <button class="nav__toggle" aria-expanded="false" type="button">
              <img src="/static/addAdmin/dropdown1.jpg">
            </button>
            <ul class="nav__wrapper">
              <li class="nav__item"><a href="{% url 'dashboard' %}" class="nav-link">Dashboard</a></li>
              <li class="nav__item"><a href="{%url 'proposals' %}" class="nav-link">Proposals</a></li>
             <li class="nav__item"><a href="{% url 'addAdmin' %}" class="nav-link">Add Admin</a></li>
             <li class="nav__item"><a href="{% url 'addUser' %}" class="nav-link">Add Students</a></li>
             {% if user.is_authenticated %}
    <li class="nav__item"><a href="{% url 'logout' %}" class="nav-link">Logout</a></li>
{% endif %}
            </ul>
          </nav>
        </div>
      </header>


<div class="row p-4 mt-4">
  <div class="column">
    <div class="card bg-primary text-white">
      <h3 class="h4">Pending Proposals</h3></br>
      <h4><i class="fa fa-list-ul"></i></h4><br>
      <span class="count"><h4>{{final.pending}}</h4></span>
    </div>
  </div>

  <div class="column">
    <div class="card bg-success text-white">
      <h3 class="h4">Accepted Proposals</h3><br>
      <h4><i class="fas fa-check"></i></h4></br>
      <span class="count"><h4>{{final.approved}}</h4></span>
    </div>
  </div>

  <div class="column">
    <div class="card bg-danger text-white">
      <h4 class="h4">Rejected Proposals</h4><br>
      <h4><i class="fa fa-ban"></i></h4></br>
      <span class="count"><h4>{{final.rejected}}</h4></span>
    </div>
  </div>

  <div class="col">
    <div class="card bg-warning text-white">
      <h4 class="h4">Split Proposals</h4><br>
      <h4><i class="fa fa-chain-broken"></i></h4></br>
      <span class="count"><h4>{{final.split}}</h4></span>
    </div>
  </div>
</div>
<br>
<div class="row p-3">
  <div class="col-sm-6 p-3">
    <div class="card bg-secondary text-white">
      <h4 class="h4">Number of Proposals</h4><br>
      <h4><i class="fa fa-sticky-note-o"></i></h4></br>
      <span class="count"><h4>
        {% if final.Proposalmodel %}
        {{ final.Proposalmodel|length }}
        {% else %}
        0
        {% endif %}
      </h4></span>
    </div>
  </div>
  <div class="col-sm-6 p-3" id="adminCard">
    <div class="card bg-secondary text-white">
        <h4 class="h4">All Admins</h4><br>
        <h4><i class="fas fa-user-shield"></i></h4></br>
        <span class="count"><h4>{{ final.adminCount }}</h4></span>
    </div>
</div>

  <div class="col-sm-6 p-3">
    <a href="{% url 'allMilestones' %}" class="card-link">
      <div class="card bg-secondary text-white">
        <h4 class="h4">All Milestones</h4><br>
        <h4><i class="fas fa-user-shield"></i></h4></br>
        <span class="count"><h4>{{final.allMilestones}}</h4></span>
      </div>
    </a>
  </div>

  <div class="col-sm-6 p-3" id="userCard">
   
      <div class="card bg-secondary text-white">
        <h4 class="h4">All Students</h4><br>
        <h4><i class="fas fa-user-shield"></i></h4></br>
        <span class="count"><h4>{{final.user}}</h4></span>
      </div>
    
  </div>
  
 

  
</div>


<!-- Fetch admin Modal -->

<div class="modal fade" id="adminModal" tabindex="-1" role="dialog" aria-labelledby="adminModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
      <div class="modal-content">
          <div class="modal-header">
              <h5 class="modal-title" id="adminModalLabel">All Admins</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
              </button>
          </div>
          <div class="modal-body">
              <table class="table">
                  <thead>
                      <tr>
                          <th scope="col">Username</th>
                          <th scope="col">Creation Date</th>
                      </tr>
                  </thead>
                  <tbody>
                      {% for admin in admins %}
                      <tr>
                          <td>{{ admin.username }}</td>
                          <td>{{ admin.date_joined }}</td>
                      </tr>
                      {% endfor %}
                  </tbody>
              </table>
          </div>
          <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          </div>
      </div>
  </div>
</div>


<!-- Fetch User Modal -->

<div class="modal fade" id="userModal" tabindex="-1" role="dialog" aria-labelledby="userModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
      <div class="modal-content">
          <div class="modal-header">
              <h5 class="modal-title" id="adminModalLabel">All Admins</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
              </button>
          </div>
          <div class="modal-body">
              <table class="table">
                  <thead>
                      <tr>
                          <th scope="col">Username</th>
                          <th scope="col">Creation Date</th>
                      </tr>
                  </thead>
                  <tbody>
                      {% for user in all_non_staff_users %}
                      <tr>
                          <td>{{ user.username }}</td>
                          <td>{{ user.date_joined }}</td>
                          {% if user.is_authenticated and not user.is_staff %}
                          <form method="POST" action="{% url 'deleteUser' user.id %}">
                            {% csrf_token %}
                            <td><button class="btn btn-danger" >Delete</button></td>
                          </form>
                          {% endif %}
                         
                      </tr>
                      {% endfor %}
                  </tbody>
              </table>
          </div>
          <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          </div>
      </div>
  </div>
</div>






<footer class="page-footer bg-dark text-white font-small elegant-color">

  <!-- Copyright -->
  <div class="footer-copyright text-center py-3">Â© 2023 Copyright:
    <a href="#" class="text-white"> Fanshawe Project Proposal Management system </a>
  </div>
  <!-- Copyright -->

</footer>
<script>
  // Add a click event listener to the card
  document.getElementById('adminCard').addEventListener('click', function() {
      // Show the modal when the card is clicked
      $('#adminModal').modal('show');
  });


  document.getElementById('userCard').addEventListener('click', function() {
    // Show the modal when the card is clicked
    $('#userModal').modal('show');
});
</script>
<script>
	$('.count').each(function () {
    $(this).prop('Counter',0).animate({
        Counter: $(this).text()
    }, {
        duration: 4000,
        easing: 'swing',
        step: function (now) {
            $(this).text(Math.ceil(now));
        }
    });
});
</script>

 <script src="/static/addAdmin/js/header-1.js"></script>
<!-- Default Statcounter code for Fanshawe Project Proposals
https://www.fanshaweprojectproposals.ca -->
<script type="text/javascript">
var sc_project=12825717;
var sc_invisible=1;
var sc_security="8b444c69";
</script>
<script type="text/javascript"
src="https://www.statcounter.com/counter/counter.js"
async></script>
<noscript><div class="statcounter"><a title="Web Analytics
Made Easy - Statcounter" href="https://statcounter.com/"
target="_blank"><img class="statcounter"
src="https://c.statcounter.com/12825717/0/8b444c69/1/"
alt="Web Analytics Made Easy - Statcounter"
referrerPolicy="no-referrer-when-downgrade"></a></div></noscript>

<!-- End of Statcounter Code -->
</body>
</html>